<main>
  <!-- çµæœãŒãªã„ã¨ãã ã‘ã€Œæœ€åˆã¯ğŸ‘Š ã˜ã‚ƒã‚“ã‘ã‚“ã€ã‚’è¡¨ç¤º -->
  <% if @result.nil? %>
    <h1 id="initial-message">æœ€åˆã¯ğŸ‘Š ã˜ã‚ƒã‚“ã‘ã‚“</h1>
  <% end %>

  <!-- ã‚ã„ã“ã®å ´åˆã«è¡¨ç¤ºã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
  <% if @result == "ã‚ã„ã“" %>
    <h1 id="initial-message" style="display: none;">ã‚ã„ã“ã§ã—ã‚‡ï¼</h1>
  <% end %>

  <!-- ã‚¸ãƒ£ãƒ³ã‚±ãƒ³ã®é¸æŠè‚¢ã€åˆæœŸè¡¨ç¤ºã¯éè¡¨ç¤ºã«è¨­å®š -->
  <div id="choices" style="display: none;">
    <div class="choices">
      <%= form_with url: play_janken_path, method: :get, local: true do |f| %>
        <button type="submit" name="choice" value="ã‚°ãƒ¼">
          <%= image_tag 'goo.png', alt: 'ã‚°ãƒ¼', loading: 'lazy' %>
        </button>
        <button type="submit" name="choice" value="ãƒãƒ§ã‚­">
          <%= image_tag 'choki.png', alt: 'ãƒãƒ§ã‚­', loading: 'lazy' %>
        </button>
        <button type="submit" name="choice" value="ãƒ‘ãƒ¼">
          <%= image_tag 'paa.png', alt: 'ãƒ‘ãƒ¼', loading: 'lazy' %>
        </button>
      <% end %>
    </div>
  </div>

  <!-- çµæœã‚’è¡¨ç¤º -->
  <% if @result.present? %>
    <% if @result != "ã‚ã„ã“" %>
      <h2>ã‚ãªãŸã®æ‰‹: <%= @player_choice %></h2>
      <h2>ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®æ‰‹: <%= @computer_choice %></h2>
      <h2>çµæœ: <%= @result %></h2>
      
      <!-- å‹ã£ãŸå ´åˆã®ãƒªãƒ³ã‚¯è¡¨ç¤º -->
      <% if @result == "å‹ã¡" %>
        <h2 id="hoi-link">
          <%= link_to 'ã‚ã£ã¡å‘ã„ã¦ãƒ›ã‚¤ã‚’å§‹ã‚ã‚‹', hoi_janken_path %>
        </h2>
      <% elsif @result == "è² ã‘" %>
        <h2>æ®‹å¿µ... ã¾ãŸéŠã‚“ã§ã­ğŸµ</h2>
        <%= link_to 'ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤ã™ã‚‹', play_janken_path %>
      <% end %>
    <% end %>
  <% end %>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // ã€Œæœ€åˆã¯ğŸ‘Š ã˜ã‚ƒã‚“ã‘ã‚“ã€ã¾ãŸã¯ã€Œã‚ã„ã“ã§ã—ã‚‡ï¼ã€ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’3ç§’å¾Œã«éè¡¨ç¤ºã«ã—ã€é¸æŠè‚¢ã‚’è¡¨ç¤º
      setTimeout(function() {
        // ã€Œæœ€åˆã¯ğŸ‘Š ã˜ã‚ƒã‚“ã‘ã‚“ã€ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹å ´åˆ
        if (document.getElementById('initial-message').style.display !== 'none') {
          document.getElementById('initial-message').style.display = 'none';
          const choicesElement = document.getElementById('choices');
          choicesElement.style.display = 'block';
        }
      }, 3000);

      // ã‚ã„ã“ã®å ´åˆã¯ã€Œæœ€åˆã¯ğŸ‘Š ã˜ã‚ƒã‚“ã‘ã‚“ã€ã‚„ã€Œã‚ã„ã“ã§ã—ã‚‡ï¼ã€ã‚’è¡¨ç¤ºã™ã‚‹
      <% if @result == "ã‚ã„ã“" %>
        document.getElementById('initial-message').style.display = 'block';
        document.getElementById('choices').style.display = 'none';
      <% end %>
    });
  </script>
</main>
